<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAMATMI</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/zub3tbp.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/web-animations/2.3.2/web-animations.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/haltu/muuri@0.9.3/dist/muuri.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.min.js"></script>

    <link rel="stylesheet" href="https://harvesthq.github.io/chosen/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://harvesthq.github.io/chosen/chosen.jquery.js"></script>

</head>
<body>

<nav id="navbar" class="">
    <div class="nav-wrapper">
      <!-- Navbar Logo -->
      <div class="logo">
        <!-- Logo Placeholder for Inlustration -->
        <!-- <a href="#home"><i class="fas fa-chess-knight"></i> Logo</a> -->
       
                <h2 class="logo1">IAMATMI</h2><h2 class="logo2">Engine</h2>
    
      </div>
  
      <!-- Navbar Links -->
      <ul id="menu">
        <li><a href="#home">Home</a></li><!--
     --><li><a href="#about">About</a></li><!--
     --><li><a href="#contact">Contact</a></li>
      </ul>
    </div>
  </nav>
  
  
  <!-- Menu Icon -->
  <div class="menuIcon">
    <span class="icon icon-bars"></span>
    <span class="icon icon-bars overlay"></span>
  </div>
  
  
  <div class="overlay-menu">
    <ul id="menu">
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
  </div>

  <!-- Sliding div starts here -->
<div id="slider" style="right:-342px;">
    <div id="sidebar" onclick="open_panel()">
    
    <div style="height:100px;width:45px;background:#4A99D3">
    
        <h1 style="color:white;transform: rotate(-90deg);padding: 40px 55px 55px 5px">Team</h1>
        
    </div>
    
    </div>
    <div id="header">
      <div class="drag-container"></div>
      <div class="board">
        <div class="board-column todo">
          <div class="board-column-container">
            <div class="board-column-header">Team 1</div>
            <div class="board-column-content-wrapper">
              <div class="board-column-content">
                <div class="board-item"><div class="board-item-content"><span>Item #</span>1</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>2</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>3</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>4</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>5</div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="board-column working">
          <div class="board-column-container">
            <div class="board-column-header">Team 2</div>
            <div class="board-column-content-wrapper">
              <div class="board-column-content">
                <div class="board-item"><div class="board-item-content"><span>Item #</span>6</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>7</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>8</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>9</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>10</div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="board-column done">
          <div class="board-column-container">
            <div class="board-column-header">Team 3</div>
            <div class="board-column-content-wrapper">
              <div class="board-column-content">
                <div class="board-item"><div class="board-item-content"><span>Item #</span>11</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>12</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>13</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>14</div></div>
                <div class="board-item"><div class="board-item-content"><span>Item #</span>15</div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <!-- <h2>Team</h2>
    <p>This is my form.Please fill it out.It's awesome!</p> -->
    <!-- <input name="dname" type="text" value="Your Name">
    <input name="demail" type="text" value="Your Email">
    <h4>Query type</h4>
    <select>
    <option>General Query</option>
    <option>Presales</option>
    <option>Technical</option>
    <option>Others</option>
    </select>
    <textarea>Message</textarea>
    <button>Send Message</button> -->
    </div>
    </div>
    <!-- Sliding div ends here -->

    <!-- main -->
    
          <div class="ptc-logs-page-wrapper">
                        <!-- <br>
                        <button type="button" class="collapsible" style="background-color:#4A99D3; color:white; max-width: 790px;
                      padding: 5px;    border-radius: 5px;    text-align: center;
                      margin: 0 auto;"><p>ADD SKILLS</p></button>
                      <div class="content">
                    <p id="car">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
</div>
 -->


<button class="collapsible" style="background-color:#4A99D3; color:white; max-width: 790px;
    padding: 5px;    border-radius: 5px;    text-align: center;
    margin: 0 auto;">ADD SKILLS</button>
<div class="content">
  <!-- <div id="output"></div> -->
        <!-- <form method="get" id="formElem"> -->
          <!-- <form method="post">
          <select style="z-index:1" data-placeholder="Choose tags ..." name="tags[]" multiple class="chosen-select">
            <option value="HTML">HTML</option>
            <option value="Java">Java</option>
            <option value="Python">Python</option>
            <option value="Ruby">Ruby</option>
            <option value="Flask">Flask</option>
            <option value="Blockchain">Blockchain</option>
          </select>
          <input class="submitbtn" type="submit">
        </form> -->
        <form id="formElem">
          <select style="z-index:1" data-placeholder="Choose skill tags ..." name="roles" multiple class="chosen-select">
            <option name="html" value="html">HTML</option>
            <option name="java" value="java">Java</option>
            <option name="python" value="python">Python</option>
            <option name="mysql" value="mysql">mysql</option>
            <option name="maven" value="maven">maven</option>
            <option name="opencv" value="opencv">opencv</option>
            <option name="php" value="php">php</option>
            <option name="xml" value="xml">xml</option>
            <option name="django" value="django">django</option>
          </select>
          <input class="submitbtn" id="submits" type="submit">
        </form>
        
         <form id="roleElem">
          <select style="z-index:1" data-placeholder="Choose Role tags ..." name="roles" multiple class="chosen-select">
            
            <option name="data scientist" value="data scientist">data scientist</option>
            <option name="business analyst" value="business analyst">business analyst</option>
            <option name="backend dev" value="backend dev">backend dev</option>
            <option name="frontend dev" value="frontend dev">frontend dev</option>
            
          </select>
          <input class="submitbtn" id="submit" type="submit">
        </form>
  <p id="car">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
</div>

    <br>
        <h2 style="color: #0A98E9;font-weight: 100;margin: 20px 0 0px 0;">Employee List</h2>
        <br>
        <!-- <div id="profile-1" class="ptc-logs-expandable-card"> -->
          <!-- Dynamically update card -->
          <div class="cardcontainer" id="cardcontainer">
     
        </div>
      </div>
    <!-- main -->

  <footer class="footer">
    <div class="footer__addr">
      <h1 class="footer__logo">IAMATMI Engine</h1>
          
      <!-- <h2>Contact</h2>
      
      <address>
        5534 Somewhere In. The World 22193-10212<br>
            
        <a class="footer__btn" href="mailto:example@gmail.com">Email Us</a>
      </address> -->
    </div>
    
    <ul class="footer__nav">
      <li class="nav__item">
        <!-- <h2 class="nav__title">Media</h2> -->
  
        <ul class="nav__ul">
          <li>
            <a href="#">Send</a>
          </li>
  
          <li>
            <a href="#">Receive</a>
          </li>
              
          <li>
            <a href="#">Buy</a>
          </li>
        </ul>
      </li>
      
      <li class="nav__item">
        <!-- <h2 class="nav__title">Legal</h2> -->
        
        <ul class="nav__ul">
          <li>
            <div id="content">
            <p> Subscribe to our newsletter and be the first to know about our updates</p>
            <input type="email" placeholder="Email Address"></input>
            <a href="#" id="button">Subscribe &raquo;</a>
        </div>
          </li>
        </ul>
      </li>
    </ul>
    
    <br>
    <br>
    
    <div class="legal">
      <p style="padding: 17px 17px 0 0;" >&copy; 2020 - Intellect Mind & Talent Management Innovations LLC</p>
      
    </div>
  </footer>

  <script src="main.js"></script>
<!-- 
  <script>
    const duration = 300;
const leaveDuration = 250;
class ExpandableCard {
  constructor(node) {
    this.backdropEl = document.createElement("DIV");
    this.backdropEl.className = "ptc-logs-expanding-card--backdrop";
    this.backdropEl.addEventListener("click", () => {
      this.collapse();
    });
    this.hostEl = node;
    this.placeholderEl = document.createElement("DIV");
    this.placeholderEl.className = "ptc-logs-expanding-card--placeholder";
    this.hostEl.appendChild(this.placeholderEl);
    this.cardContentEl = node.querySelector("[cardContent]");
    this.collapsedContentEl = node.querySelector("[collapsedContent]");
    this.expandedContentEl = node.querySelector("[expandedContent]");
    this.expanded = false;
    this.animatingFlag = false;

    this.hostEl.addEventListener("click", () => {
      this.expand();
    });
  }

  expand() {
    if (this.expanded || this.animating) {
      return;
    }
    this.animating = true;

    this.backdropEl.style.position = "fixed";
    this.backdropEl.style.top = "0px";
    this.backdropEl.style.left = "0px";
    this.backdropEl.style.right = "0px";
    this.backdropEl.style.bottom = "0px";
    this.backdropEl.style.opacity = "0";

    this.backdropEl.style.zIndex = 9;

    document.body.appendChild(this.backdropEl);

    const cardBoundingRect = this.cardContentEl.getBoundingClientRect();

    this.placeholderEl.style.height = `${cardBoundingRect.height}px`;
    this.cardContentEl.style.position = "fixed";
    this.cardContentEl.style.zIndex = 10;
    this.cardContentEl.style.top = `${0}px`;
    this.cardContentEl.style.left = `${0}px`;
    this.cardContentEl.style.width = null;
    this.cardContentEl.style.height = null;
    this.cardContentEl.style.transform = `translate(${
    cardBoundingRect.left
    }px), ${cardBoundingRect.top}px)`;
    this.expandedContentEl.style.visibility = "visible";

    const fromHeight = this.staticHeight(this.cardContentEl);
    const expandedContentHeight = this.staticHeight(this.expandedContentEl);
    const toHeight = fromHeight + expandedContentHeight;

    const targetBoundingRect = {
      left: 16,
      top: 16,
      width: window.innerWidth - 32,
      height: toHeight };

    const promises = [
    anime({
      targets: this.cardContentEl,
      height: [fromHeight, toHeight],
      translateX: [cardBoundingRect.left, targetBoundingRect.left],
      translateY: [cardBoundingRect.top, targetBoundingRect.top],
      width: [cardBoundingRect.width, targetBoundingRect.width],
      boxShadow:
      "0 0 1px 0 rgba(33,43,54,.08), 0 8px 10px 0 rgba(33,43,54,.2)",
      duration: duration,
      easing: 'easeOutCubic' }).
    finished,
    anime({
      targets: this.expandedContentEl,
      translateY: [16, 0],
      opacity: [0, 1],
      delay: 100,
      duration: duration,
      easing: 'easeOutCubic' }).
    finished,
    anime({
      targets: this.backdropEl,
      opacity: [0, 0.33],
      duration: duration,
      easing: 'easeOutCubic' })];


    return Promise.all(promises).then(() => {
      this.animating = false;
      this.expanded = true;
    });
  }

  collapse() {
    if (!this.expanded || this.animating) {
      return;
    }
    this.animating = true;

    const placeholderRect = this.placeholderEl.getBoundingClientRect();
    const cardContentRect = this.cardContentEl.getBoundingClientRect();
    const expandedContentHeight = this.expandedContentEl.offsetHeight;
    const fromHeight = cardContentRect.height;
    debugger;
    const toHeight = fromHeight - expandedContentHeight;
    const promises = [
    anime({
      targets: this.cardContentEl,
      height: [fromHeight, toHeight],
      translateX: [cardContentRect.left, placeholderRect.left],
      translateY: [cardContentRect.top, placeholderRect.top],
      width: [cardContentRect.width, placeholderRect.width],
      boxShadow: "0 2px 2px 1px rgba(0, 0, 0, 0.1)",
      duration: leaveDuration,
      delay: 0,
      easing: 'easeInQuad' }).
    finished,
    anime({
      targets: this.expandedContentEl,
      translateY: [0, 16],
      opacity: [1, 0],
      duration: leaveDuration,
      easing: 'easeInQuad' }).
    finished,
    anime({
      targets: this.backdropEl,
      opacity: [0.33, 0],
      duration: leaveDuration,
      easing: 'easeInQuad' })];


    return Promise.all(promises).then(() => {
      this.animating = false;
      this.expanded = false;

      this.placeholderEl.style.height = '0px';
      this.cardContentEl.style.position = "relative";
      this.cardContentEl.style.zIndex = null;
      this.cardContentEl.style.top = null;
      this.cardContentEl.style.left = null;
      this.cardContentEl.style.width = null;
      this.cardContentEl.style.height = null;
      this.cardContentEl.style.transform = null;
      this.expandedContentEl.style.visibility = "hidden";
      document.body.removeChild(this.backdropEl);
    });
  }

  staticHeight(node) {
    const height = node.offsetHeight;
    node.style.height = `${height}px`;
    return height;
  }}


var c = new ExpandableCard(document.querySelector("#profile-1"));
var c = new ExpandableCard(document.querySelector("#profile-2"));
var c = new ExpandableCard(document.querySelector("#profile-3"));
var c = new ExpandableCard(document.querySelector("#profile-4"));


document.querySelectorAll('.ptc-logs-mock-content').forEach(c => {
  const lines = Math.floor(Math.random() * 6) + 2;
  for (var i = 0; i < lines; i++) {if (window.CP.shouldStopExecution(0)) break;
    const w = Math.random() * 2 + 3;
    const el = document.createElement('div');
    el.className = "ptc-logs-mock-content-line";
    el.style.width = `${w * 20}%`;
    c.appendChild(el);
  }window.CP.exitedLoop(0);
});
  </script> -->

  <script>
    var dragContainer = document.querySelector('.drag-container');
var itemContainers = [].slice.call(document.querySelectorAll('.board-column-content'));
var columnGrids = [];
var boardGrid;

// Init the column grids so we can drag those items around.
itemContainers.forEach(function (container) {
  var grid = new Muuri(container, {
    items: '.board-item',
    dragEnabled: true,
    dragSort: function () {
      return columnGrids;
    },
    dragContainer: dragContainer,
    dragAutoScroll: {
      targets: (item) => {
        return [
          { element: window, priority: 0 },
          { element: item.getGrid().getElement().parentNode, priority: 1 },
        ];
      }
    },
  })
  .on('dragInit', function (item) {
    item.getElement().style.width = item.getWidth() + 'px';
    item.getElement().style.height = item.getHeight() + 'px';
  })
  .on('dragReleaseEnd', function (item) {
    item.getElement().style.width = '';
    item.getElement().style.height = '';
    item.getGrid().refreshItems([item]);
  })
  .on('layoutStart', function () {
    boardGrid.refreshItems().layout();
  });

  columnGrids.push(grid);
});

// Init board grid so we can drag those columns around.
boardGrid = new Muuri('.board', {
  dragEnabled: true,
  dragHandle: '.board-column-header'
});
</script>

<script>
  //document.getElementById("output").innerHTML = location.search;
  $(".chosen-select").chosen();
  </script>

  <script>
/*    formElem.onsubmit = async (e) => {
      e.preventDefault();
  
      let response = await fetch('https://morning-springs-97116.herokuapp.com/getRoleFilteredApplicant', {
        method: 'POST',
        body: new FormData(formElem)
      });

      let result = await response.json();
  
      alert(result.message);
    };
    */

    const myForms = document.getElementById('formElem');

    myForms.addEventListener('submit', function(e){
      e.preventDefault();

     // const formData = new FormData(this);

     var a = [];

     var formData = document.getElementById("formElem").elements.namedItem("roles").value;

     a.push(JSON.stringify({"skills":formData}))

     console.log(a)

      var myHeaders = new Headers();
      myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwaG9uZSI6IjEyMzQ1Njc4OTkiLCJzdWIiOjE5LCJpYXQiOjE1ODk1NDM1NTQsImV4cCI6MTYyMTEwMTE1NH0.LdN4VSwftEyle68XrHiPK81OUp8ty_neJBmMCZNoAyQ");
      myHeaders.append("Content-Type", "application/json");

     // var raw = JSON.stringify({"role":["business analyst","backend dev"]});

      fetch('https://morning-springs-97116.herokuapp.com/getSkillFilteredApplicants',{
        method: 'POST',
        //body: JSON.stringify({"role":"business analyst"}),
        body: a,
        headers: myHeaders
      })
      .then(function (response) {
        return response.json();
      })
      .then(function (result) {

      
        var data = [];
        data["feeds"] = result;
        console.log(data)
     
       // data.push(result);

        console.log(data.feeds.length)

        var i=0;

        for (;i < data.feeds.length; i++) {
          console.log(data.feeds[i].role)
        }
        
        const buildHairstyleCard = hairstyle => {

          var coll = document.getElementsByClassName("collapsible");
          var i;
          
          for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var content = this.nextElementSibling;
              if (content.style.maxHeight){
                content.style.maxHeight = null;
              } else {
                content.style.maxHeight = content.scrollHeight + "px";
              } 
            });
          }

          const profile = document.createElement("div");
          const div = document.createElement("div");
          const div2 = document.createElement("div");
          const div3 = document.createElement("div");
          const div4 = document.createElement("div");
          const div5 = document.createElement("div");
          const div6 = document.createElement("div");
          const div7 = document.createElement("div");
          const div8 = document.createElement("div");
          const div9 = document.createElement("div");
          const div10 = document.createElement("div");
          const div11 = document.createElement("div");
          const div12 = document.createElement("div");

          //const h4 = document.createElement("h4");
          const p1 = document.createElement("p");
          const p2 = document.createElement("p");
          const p3 = document.createElement("p");

          const h3 = document.createElement("h3");
          
          const tab = document.createElement("table");
          const tr1 = document.createElement("tr");
          const tr2 = document.createElement("tr");
          const tr3 = document.createElement("tr");
          const td1 = document.createElement("td");
          const td2 = document.createElement("td");
          const td3 = document.createElement("td");
          const td4 = document.createElement("td");
          const td5 = document.createElement("td");
          const td6 = document.createElement("td");
          
          const btn = document.createElement("button");
  
          const body = document.getElementById("cardcontainer");
          body.append(profile);
          profile.append(div);
         // div.append(h4);
          div.append(div2);
          div2.append(div3);
          div3.append(div4);
          div2.append(div5);
          div5.append(div6);
          div5.append(div9);
          div6.append(div7);
          div6.append(div8);
          div8.append(p1);
          div9.append(p2);
          div.append(btn);
          div.append(div10);
          div10.append(p3);
          p3.append(tab);
          p3.append(h3);
          p3.append(div11);
          tab.append(tr1);
          tab.append(tr2);
          tab.append(tr3);
          tr1.append(td1);
          tr1.append(td2);
          tr2.append(td3);
          tr2.append(td4);
          tr3.append(td5);
          tr3.append(td6);
          div11.append(div12);
  
         // h4.innerHTML += '<br>'+data.feeds.role;
       //  var i=0;

        //for (;i < data.feeds.length; i++) {
        //  console.log(data.feeds[i].fName,data.feeds[i].lName)
        
         // div7.innerHTML = data.feeds[i].fName;
          //p2.innerHTML = data.feeds[i].role;
        //}
         // p3.innerHTML = "Data Analyst";

          div7.innerHTML = hairstyle.fName+`&nbsp;`+hairstyle.lName;
          p1.innerHTML = hairstyle.role;
          p2.innerHTML = "90%";
          btn.innerHTML = "View Profile";
          td1.innerHTML = "Current Project :";
          td2.innerHTML = "Lorem ipsum dolor sit, amet consectetur adipisicing elit.";
          td3.innerHTML = "Project Duration :";
          td4.innerHTML = "12th November to 13th December";
          td5.innerHTML = "Project Description:";
          td6.innerHTML = "Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit eum mollitia reiciendis illum sint recusandae necessitatibus veritatis voluptatibus natus ad assumenda.";
          h3.innerHTML = "Matching Skills:";
          div12.innerHTML = hairstyle.skills;

  //  console.log(hairstyle)
          
        //  var dateofcreation = [];
        //  var actualdata = [];
        //  var textareadata = [];

        //  var i=0;
          
        //  for (;i < data.feeds.length; i++) {
           //dateofcreation.push(data.feeds[i].skills[0]);
          // dateofcreation.push(hairstyle.skills);
          // div11.append(div12);
          // div12.innerHTML = hairstyle.skills;
          // console.log(dateofcreation);
        // }
          //p3.innerHTML = hairstsyle.skills[0];
          profile.setAttribute("class", "profile");
          div.setAttribute("class", "cardContent");
          div2.setAttribute("class", "collapsedContent");
          div3.setAttribute("class", "ptc-logs-expandable-card--left-col col");
          div4.setAttribute("class", "ptc-logs-expandable-card--profile-image");
          div5.setAttribute("class", "flex-container");
          div6.setAttribute("class", "ptc-logs-expandable-card--right-col col");
          div7.setAttribute("class", "ptc-logs-expandable-card--title");
          div8.setAttribute("class", "ptc-logs-expandable-card--sub-title");
          div9.setAttribute("class", "perc");
          btn.setAttribute("class", "collapsible");
          div10.setAttribute("class", "content");
          p3.setAttribute("id", "car");
          tr1.setAttribute("id", "tab");
          td1.setAttribute("id", "detail");
          td2.setAttribute("id", "details");
          td3.setAttribute("id", "detail");
          td4.setAttribute("id", "details");
          td5.setAttribute("id", "detail");
          td6.setAttribute("id", "details");
          h3.setAttribute("id", "matchingskill");
          div11.setAttribute("class", "row");
          div11.setAttribute("id", "row");
          div12.setAttribute("class", "vanilla-pill");
          
         // console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',data.feeds.role)

          document.getElementById("submits").addEventListener("click", function() {
            profile.remove();
          });

          var coll = document.getElementsByClassName("collapsible");
          var i;
          
          for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var content = this.nextElementSibling;
              if (content.style.maxHeight){
                content.style.maxHeight = null;
              } else {
                content.style.maxHeight = content.scrollHeight + "px";
              } 
            });
          }

          }

          if(data.feeds==""){
            //alert("formData")
             
                alert("No record found")
              }

         // console.log('sssssssssssssssssssssssssssssss',data.feeds)
  
          data.feeds.forEach(hairstyle => buildHairstyleCard(hairstyle));
          
        //console.log(result.length);
        //console.log(formData)
      
      })
      .catch(function (error) {
        console.log('error', error);
      });
    });  


    //////////////////////////////////////////////////////////////////////////////////////////////////
   
    const myForm = document.getElementById('roleElem');

    myForm.addEventListener('submit', function(e){
      e.preventDefault();

     // const formData = new FormData(this);

     var a = [];

     var formData = document.getElementById("roleElem").elements.namedItem("roles").value;

     a.push(JSON.stringify({"role":formData}))

     console.log(a)

      var myHeaders = new Headers();
      myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwaG9uZSI6IjEyMzQ1Njc4OTkiLCJzdWIiOjE5LCJpYXQiOjE1ODk1NDM1NTQsImV4cCI6MTYyMTEwMTE1NH0.LdN4VSwftEyle68XrHiPK81OUp8ty_neJBmMCZNoAyQ");
      myHeaders.append("Content-Type", "application/json");

     // var raw = JSON.stringify({"role":["business analyst","backend dev"]});

      fetch('https://morning-springs-97116.herokuapp.com/getRoleFilteredApplicant',{
        method: 'POST',
        //body: JSON.stringify({"role":"business analyst"}),
        body: a,
        headers: myHeaders
      })
      .then(function (response) {
        return response.json();
      })
      .then(function (result) {

      
        var data = [];
        data["feeds"] = result;
        console.log(data)
     
       // data.push(result);

        console.log(data.feeds.length)

        var i=0;

        for (;i < data.feeds.length; i++) {
          console.log(data.feeds[i].role)
        }
        
        const buildHairstyleCard = hairstyle => {

          var coll = document.getElementsByClassName("collapsible");
          var i;
          
          for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var content = this.nextElementSibling;
              if (content.style.maxHeight){
                content.style.maxHeight = null;
              } else {
                content.style.maxHeight = content.scrollHeight + "px";
              } 
            });
          }

          const profile = document.createElement("div");
          const div = document.createElement("div");
          const div2 = document.createElement("div");
          const div3 = document.createElement("div");
          const div4 = document.createElement("div");
          const div5 = document.createElement("div");
          const div6 = document.createElement("div");
          const div7 = document.createElement("div");
          const div8 = document.createElement("div");
          const div9 = document.createElement("div");
          const div10 = document.createElement("div");
          const div11 = document.createElement("div");
          const div12 = document.createElement("div");

          //const h4 = document.createElement("h4");
          const p1 = document.createElement("p");
          const p2 = document.createElement("p");
          const p3 = document.createElement("p");

          const h3 = document.createElement("h3");
          
          const tab = document.createElement("table");
          const tr1 = document.createElement("tr");
          const tr2 = document.createElement("tr");
          const tr3 = document.createElement("tr");
          const td1 = document.createElement("td");
          const td2 = document.createElement("td");
          const td3 = document.createElement("td");
          const td4 = document.createElement("td");
          const td5 = document.createElement("td");
          const td6 = document.createElement("td");
          
          const btn = document.createElement("button");
  
          const body = document.getElementById("cardcontainer");
          body.append(profile);
          profile.append(div);
         // div.append(h4);
          div.append(div2);
          div2.append(div3);
          div3.append(div4);
          div2.append(div5);
          div5.append(div6);
          div5.append(div9);
          div6.append(div7);
          div6.append(div8);
          div8.append(p1);
          div9.append(p2);
          div.append(btn);
          div.append(div10);
          div10.append(p3);
          p3.append(tab);
          p3.append(h3);
          p3.append(div11);
          tab.append(tr1);
          tab.append(tr2);
          tab.append(tr3);
          tr1.append(td1);
          tr1.append(td2);
          tr2.append(td3);
          tr2.append(td4);
          tr3.append(td5);
          tr3.append(td6);
          div11.append(div12);
  
         // h4.innerHTML += '<br>'+data.feeds.role;
       //  var i=0;

        //for (;i < data.feeds.length; i++) {
        //  console.log(data.feeds[i].fName,data.feeds[i].lName)
        
         // div7.innerHTML = data.feeds[i].fName;
          //p2.innerHTML = data.feeds[i].role;
        //}
         // p3.innerHTML = "Data Analyst";

          div7.innerHTML = hairstyle.fName+`&nbsp;`+hairstyle.lName;
          p1.innerHTML = hairstyle.role;
          p2.innerHTML = "90%";
          btn.innerHTML = "View Profile";
          td1.innerHTML = "Current Project :";
          td2.innerHTML = "Lorem ipsum dolor sit, amet consectetur adipisicing elit.";
          td3.innerHTML = "Project Duration :";
          td4.innerHTML = "12th November to 13th December";
          td5.innerHTML = "Project Description:";
          td6.innerHTML = "Lorem ipsum dolor sit amet consectetur adipisicing elit. Sit eum mollitia reiciendis illum sint recusandae necessitatibus veritatis voluptatibus natus ad assumenda.";
          h3.innerHTML = "Matching Skills:";
          div12.innerHTML = hairstyle.skills;

  //  console.log(hairstyle)
          
        //  var dateofcreation = [];
        //  var actualdata = [];
        //  var textareadata = [];

        //  var i=0;
          
        //  for (;i < data.feeds.length; i++) {
           //dateofcreation.push(data.feeds[i].skills[0]);
          // dateofcreation.push(hairstyle.skills);
          // div11.append(div12);
          // div12.innerHTML = hairstyle.skills;
          // console.log(dateofcreation);
        // }
          //p3.innerHTML = hairstsyle.skills[0];
          profile.setAttribute("class", "profile");
          div.setAttribute("class", "cardContent");
          div2.setAttribute("class", "collapsedContent");
          div3.setAttribute("class", "ptc-logs-expandable-card--left-col col");
          div4.setAttribute("class", "ptc-logs-expandable-card--profile-image");
          div5.setAttribute("class", "flex-container");
          div6.setAttribute("class", "ptc-logs-expandable-card--right-col col");
          div7.setAttribute("class", "ptc-logs-expandable-card--title");
          div8.setAttribute("class", "ptc-logs-expandable-card--sub-title");
          div9.setAttribute("class", "perc");
          btn.setAttribute("class", "collapsible");
          div10.setAttribute("class", "content");
          p3.setAttribute("id", "car");
          tr1.setAttribute("id", "tab");
          td1.setAttribute("id", "detail");
          td2.setAttribute("id", "details");
          td3.setAttribute("id", "detail");
          td4.setAttribute("id", "details");
          td5.setAttribute("id", "detail");
          td6.setAttribute("id", "details");
          h3.setAttribute("id", "matchingskill");
          div11.setAttribute("class", "row");
          div11.setAttribute("id", "row");
          div12.setAttribute("class", "vanilla-pill");
          
         // console.log('xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',data.feeds.role)

          document.getElementById("submit").addEventListener("click", function() {
            profile.remove();
          });

          var coll = document.getElementsByClassName("collapsible");
          var i;
          
          for (i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
              this.classList.toggle("active");
              var content = this.nextElementSibling;
              if (content.style.maxHeight){
                content.style.maxHeight = null;
              } else {
                content.style.maxHeight = content.scrollHeight + "px";
              } 
            });
          }

          }

          if(data.feeds==""){
            //alert("formData")
             
                alert("No record found")
              }

         // console.log('sssssssssssssssssssssssssssssss',data.feeds)
  
          data.feeds.forEach(hairstyle => buildHairstyleCard(hairstyle));
          
        //console.log(result.length);
        //console.log(formData)
      
      })
      .catch(function (error) {
        console.log('error', error);
      });
    });  

    //////////////
   
  </script>
    
  <script>
    var coll = document.getElementsByClassName("collapsible");
    var i;
    
    for (i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.maxHeight){
          content.style.maxHeight = null;
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
        } 
      });
    }
    </script>
</body>
</html>